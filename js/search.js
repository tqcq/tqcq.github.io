var searchFunc=function(e,t,r){$.ajax({url:e,dataType:"xml",success:function(e){var n,i=$("entry",e).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}})).get(),e=document.getElementById(t);e&&(n=document.getElementById(r),e.addEventListener("input",(function(){var e=[],t=function(e){for(var t,r=[],n=0;n<e.length;n++)for(t=n+1;t<e.length+1;t++)r.push(e.slice(n,t).join(" "));return r}(this.value.trim().toLowerCase().split(" ")).sort((function(e,t){return t.split(" ").length-e.split(" ").length}));if(n.innerHTML="",!(this.value.trim().length<=0)&&(i.forEach((function(r){var n,i,l=0,s=(r.title&&""!==r.title.trim()||(r.title="Untitled"),r.title.trim().toLowerCase()),a=s.toLowerCase(),c=r.content.trim().replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<figure([\s\S]*?)<\/figure>/gi,"").replace(/<\/div>/gi,"\n").replace(/<\/li>/gi,"\n").replace(/<li>/gi,"  *  ").replace(/<\/ul>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/gi,""),u=c.toLowerCase(),r=r.url,o=-1,g=-1;""!==c&&t.forEach((function(e){n=a.indexOf(e),o=u.indexOf(e),(0<=n||0<=o)&&(l+=1,o<0&&(o=0),g<0)&&(g=o)})),0<l&&((i={}).rank=l,i.str="<li><a href='"+r+"' class='search-result-title'>"+s+"</a>",0<=g&&(r=g+80,(r=0==(s=(s=g-20)<0?0:s)?100:r)>c.length&&(r=c.length),c=c.substring(s,r),s=new RegExp(t.join("|"),"gi"),c=c.replace(s,(function(e){return'<em class="search-keyword">'+e+"</em>"})),i.str+='<p class="search-result">'+c+"...</p>"),i.str+="</li>",e.push(i))})),e.length)){e.sort((function(e,t){return t.rank-e.rank}));for(var r='<ul class="search-result-list">',l=0;l<e.length;l++)r+=e[l].str;n.innerHTML=r+="</ul>"}})))}})};